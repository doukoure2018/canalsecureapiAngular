<ng-container *ngIf="compteState$ | async as state">
  <ng-container>
    <app-navbar [user]="state.appData?.data?.user"></app-navbar>
    <section>
      <div class="container">
        <nav aria-label="breadcrumb" style="margin-top: 8px">
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a [routerLink]="['/']">Home</a>
            </li>
            <li class="breadcrumb-item active">Comptes</li>
            <li class="breadcrumb-item active" aria-current="page">
              {{ state?.appData?.data?.user?.firstName }}
              {{ state?.appData?.data?.user?.lastName }}
            </li>
          </ol>
        </nav>
        <div class="row mt-3">
          <div class="col">
            <h4 class="fw-bold text-start">Comptes</h4>
          </div>
          <div class="row justify-content-end">
            <div class="col-auto">
              <button
                [routerLink]="['/comptes/new']"
                class="btn btn-outline-success d-flex align-items-center fw-bold"
                style="font-size: 15px; cursor: pointer"
              >
                <i class="bi bi-plus-lg me-2"></i>
                Nouveau Compte
              </button>
            </div>
          </div>
        </div>
        <div class="col-xm-12">
          <table class="table table-hover">
            <thead>
              <tr>
                <th class="text-center" scope="col">ID</th>
                <th scope="col">Image</th>
                <th scope="col">Full Name</th>
                <th scope="col">Contact</th>
                <th scope="col">Email</th>
                <th scope="col">Status</th>
                <th scope="col">Action</th>
              </tr>
            </thead>
            <tbody class="table-body">
              <tr
                *ngFor="let compte of state.appData?.data?.comptes"
                class="cell-1"
              >
                <th class="text-center">{{ compte.id }}</th>
                <td>
                  <img
                    [src]="compte.imageUrl"
                    width="42"
                    height="42"
                    class="rounded-circle"
                    [alt]="compte.firstName"
                  />
                </td>
                <td>{{ compte.firstName }} {{ compte.lastName }}</td>
                <td>{{ compte.phone }}</td>
                <td>{{ compte.email }}</td>
                <td>
                  <span
                    class="badge"
                    [ngClass]="compte.enabled ? 'bg-success' : 'bg-danger'"
                  >
                    {{ compte.enabled ? "ACTIF" : "INACTIF" }}
                  </span>
                </td>

                <td>
                  <button
                    type="button"
                    (click)="viewDetail(compte)"
                    class="btn"
                    [ngClass]="compte.nonLocked ? 'btn-danger' : 'btn-primary'"
                  >
                    <i class="bi bi-eye"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </ng-container>
</ng-container>
